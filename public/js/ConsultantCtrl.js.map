{"version":3,"sources":["ConsultantCtrl.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ConsultantCtrl.js","sourcesContent":["/**\n * Created by akramkhalifa on 29/08/2016.\n */\n'use strict';\n\n/**\n * @ngdoc function\n * @name demoApp.controller:IndexCtrl\n * @description\n * # IndexCtrl\n * Controller of the demoApp\n */\nhrmApp\n    .controller('ConsultantCtrl',['ConsultantService','$http','$mdEditDialog', '$scope','$mdDialog','$timeout','$mdBottomSheet', '$mdToast',\n        function (\n            ConsultantService,$http,$mdEditDialog, $scope,$mdDialog, $timeout,$mdBottomSheet, $mdToast) {\n\n            $scope.villes = [\"RABAT\", \"CASABLANCA\", \"TANGER\", \"FES\", \"Salé\", \"Marrakech\", \"Meknes\"];\n            $scope.selectedVilles;\n            $scope.getselectedVilles = function() {\n                if ($scope.selectedVilles !== undefined) {\n                    return  $scope.selectedVilles;\n                } else {\n                    return \"Ville\";\n                }\n            };\n\n            $scope.types = [\"Personne Physique\", \"Personne Morale\"];\n            $scope.selectedTypes;\n            $scope.getselectedTypes = function() {\n                if ($scope.selectedTypes !== undefined) {\n                    return  $scope.selectedTypes;\n                } else {\n                    return \"Type\";\n                }\n            };\n\n            $scope.id = null;\n\n            $scope.selected = [];\n            $scope.limitOptions = [5, 10, 15, {\n                label: 'All',\n                value: function () {\n                    return $scope.consultants ? $scope.consultants.count : 0;\n                }\n            }];\n\n            $scope.options = {\n                rowSelection: true,\n                multiSelect: true,\n                autoSelect: true,\n                decapitate: false,\n                largeEditDialog: false,\n                boundaryLinks: false,\n                limitSelect: true,\n                pageSelect: true\n            };\n\n            $scope.query = {\n                order: 'raison',\n                limit: 5,\n                page: 1\n            };\n\n\n            $scope.init = function () {\n                ConsultantService.getConsultants().$promise.then(function (data) {\n                    $scope.consultants = {\n                        \"count\":data.length,\n                        \"data\":data\n                    };\n                });\n            };\n\n\n            $scope.deselect = function (item) {\n                console.log(item.id,'was deselected');\n            };\n\n            $scope.log = function (item) {\n                console.log(item.id,'was selected');\n                $scope.id = item.id;\n            };\n\n            $scope.loadStuff = function () {\n                $scope.promise = $timeout(function () {\n\n                }, 2000);\n            };\n\n            $scope.toggleLimitOptions = function () {\n                $scope.limitOptions = $scope.limitOptions ? undefined : [5, 10, 15];\n            };\n\n            $scope.loadStuff = function () {\n                $scope.promise = $timeout(function () {\n                    // loading\n                }, 2000);\n            };\n\n            $scope.logPagination = function (page, limit) {\n                console.log('page: ', page);\n                console.log('limit: ', limit);\n            };\n\n            $scope.consultant = {};\n\n            $scope.addConsultant = function (event) {\n                $mdDialog.show({\n                    controller: AddMissionController,\n                    locals: {\n                        items: $scope.consultants\n                    },\n                    parent: angular.element(document.body),\n                    templateUrl: 'views/consultant/addconsultant.html',\n                    controllerAs: 'ctrl',\n                    clickOutsideToClose:true,\n                    targetEvent: event\n                }).then(function (add) {\n                    $scope.init();\n                   /* $mdToast.show(\n                        $mdToast.simple()\n                            .textContent(\"Consultant ajouté avec succès\")\n                            .position('top right')\n                            .hideDelay(1500)\n                    );*/\n\n                }, function(cancel) {\n                });\n            };\n\n\n            $scope.showConsultant = function (event) {\n                $mdDialog.show({\n                    locals: {\n                        id: $scope.id\n                    },\n                    controller: function ($mdDialog,$scope,id) {\n                        ConsultantService.getConsultant({id:id}).$promise.then(function (data) {\n                            angular.forEach(data,function (value) {\n                                $scope.datas = value;\n                            })\n                        });\n                        $scope.hide = function () {\n                            $mdDialog.hide();\n                        };\n                        $scope.cancel = function () {\n                            $mdDialog.cancel();\n                        };\n                    },\n                    parent: angular.element(document.body),\n                    templateUrl: 'views/consultant/seeconsultant.html',\n                    clickOutsideToClose:true,\n                    targetEvent: event\n                });\n            };\n\n\n            $scope.editConsultant = function (event) {\n                $mdDialog.show({\n                    controller: EditConsultantController,\n                    parent: angular.element(document.body),\n                    templateUrl: 'views/consultant/editconsultant.html',\n                    controllerAs: 'ctrl',\n                    locals: {\n                        items: $scope.consultants,id: $scope.id\n                    },\n                    clickOutsideToClose:true,\n                    targetEvent: event\n                }).then(function (edit) {\n                    $scope.init();\n                }, function(cancel) {\n                });\n            };\n\n            function AddMissionController($scope, $mdDialog,items) {\n                $scope.hide = function () {\n                    $mdDialog.hide();\n                };\n                $scope.cancel = function () {\n                    $mdDialog.cancel();\n                };\n                $scope.add = function (consultant) {\n                    if(consultant.nom != null){\n                        consultant = {\n                            nom : consultant.nom,\n                            prenom: consultant.prenom || \" \",\n                            date_naissance: consultant.date_naissance || \" \",\n                            adresse: consultant.adresse || \" \",\n                            ville: consultant.ville || \" \",\n                            email: consultant.email || \" \",\n                            telephone: consultant.telephone || \" \",\n                            type: consultant.type || \" \",\n                            rib: consultant.rib || \" \",\n                            banque: consultant.banque || \" \",\n                            observations: consultant.observations || \" \"\n                        };\n\n                        ConsultantService.saveConsultant(consultant).$promise.then(\n                            function(value) {\n                                items.data.push(value);\n                                $mdDialog.hide(consultant);\n                            },function (data) {\n                                console.log(data);\n                            });\n                    }\n                    else {\n                        console.log(\"error\");\n                    }\n\n                };\n            };\n\n            function EditConsultantController($scope, $mdDialog,items,id) {\n                $scope.hide = function () {\n                    $mdDialog.hide();\n                };\n                $scope.cancel = function () {\n                    $mdDialog.cancel();\n                };\n\n                ConsultantService.getConsultant({id: id}).$promise.then(function (data) {\n                    angular.forEach(data,function (value) {\n                        $scope.datas = value;\n                    })\n                });\n\n                $scope.edit = function (consultant) {\n                    consultant = {\n                        nom : consultant.nom,\n                        prenom: consultant.prenom,\n                        date_naissance: consultant.date_naissance,\n                        adresse: consultant.adresse,\n                        ville: consultant.ville,\n                        email: consultant.email,\n                        telephone: consultant.telephone,\n                        type: consultant.type,\n                        rib: consultant.rib,\n                        banque: consultant.banque,\n                        observations: consultant.observations\n                    };\n                    ConsultantService.editConsultant({id: id},consultant);\n                    $mdDialog.hide(consultant);\n                }\n            }\n\n            $scope.showConfirm = function(ev) {\n                var confirm = $mdDialog.confirm()\n                    .title('Vous voulez vraiment supprimer?')\n                    .textContent('')\n                    .targetEvent(ev)\n                    .ok('Effacer')\n                    .cancel('Annuler');\n                $mdDialog.show(confirm).then(function() {\n                    var index =  $scope.consultants[\"data\"].indexOf(\n                        $scope.consultants[\"data\"].find(function(e) {\n                            return e.id == $scope.id;\n                        }));\n\n                    ConsultantService.deleteConsultant({id: $scope.id}).$promise.then(function (success) {\n                        $scope.consultants[\"data\"].splice(index,1);\n                    });\n\n                    $mdToast.show(\n                        $mdToast.simple()\n                            .textContent(\"Le client a été supprimé\")\n                            .position('top right')\n                            .hideDelay(1500)\n                    );\n                }, function() {\n                });\n            };\n            $scope.init();\n\n            //Consultant Not Found\n\n            $scope.serachConsultant = function (consultant) {\n                $http({\n                    method: 'POST',\n                    url: 'http://localhost/hrm/public/api/serachConsultant',\n                    data:  {nom: consultant.nom, prenom: consultant.prenom,email: consultant.email,telephone:consultant.telephone}\n                }).success(function (data) {\n                    console.log(data);\n                    if(data != 'Consultant Not Found'){\n                        angular.forEach(data,function (value) {\n                            $scope.consultants[\"data\"] = [];\n                            $scope.consultants[\"data\"].push(value);\n                        });\n                    }\n                    else {\n                        $scope.init();\n                    }\n                }).error(function (data) {\n                    console.log(data);\n                });\n                consultant.nom = \"\";\n                consultant.prenom = \"\";\n                consultant.email = \"\";\n                consultant.telephone = \"\";\n\n            };\n\n        }\n    ]);\n\n"],"sourceRoot":"/source/"}