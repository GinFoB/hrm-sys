{"version":3,"sources":["appFilereader.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"appFilereader.js","sourcesContent":["/**\n * Created by akramkhalifa on 22/09/2016.\n */\nhrmApp.directive('appFilereader', function($q) {\n\n    var slice = Array.prototype.slice;\n    return {\n        restrict: 'A',\n        require: '?ngModel',\n        link: function(scope, element, attrs, ngModel) {\n            if (!ngModel) return;\n\n            ngModel.$render = function() {};\n\n            element.bind('change', function(e) {\n                var element = e.target;\n\n                $q.all(slice.call(element.files, 0).map(readFile))\n                    .then(function(values) {\n                        if (element.multiple) ngModel.$setViewValue(values);\n                        else ngModel.$setViewValue(values.length ? values[0] : null);\n                    });\n\n                function readFile(file) {\n                    var deferred = $q.defer();\n\n                    var reader = new FileReader();\n                    reader.onload = function(e) {\n                        deferred.resolve(e.target.result);\n                    };\n                    reader.onerror = function(e) {\n                        deferred.reject(e);\n                    };\n                    reader.readAsDataURL(file);\n\n                    return deferred.promise;\n                }\n\n            }); //change\n\n        } //link\n    }; //return\n});"],"sourceRoot":"/source/"}